title UC 19 - Visualiser l encours de son prêt

Acteurs: Mutualiste
Lifelines:
  Mutualiste
  Interface Utilisateur (UI)
  Système de Gestion Prêts (Backend/Système)
  Base de Données (DB)

Flux:
  Mutualiste -> UI: Se connecter à son espace personnel (UC 1)
  Mutualiste -> UI: Naviguer vers section "Mes Prêts"

  UI -> Système de Gestion Prêts: Demander liste prêts du mutualiste [ID Mutualiste]

  Système de Gestion Prêts -> DB: Interroger base pour prêts en cours/récents [ID Mutualiste]
  DB --> Système de Gestion Prêts: Retourner liste des prêts (ou liste vide)

  Opt [Aucun prêt en cours (Alt A1)]
    Système de Gestion Prêts --> UI: Indiquer liste vide
    UI --> Mutualiste: Afficher message "Aucun prêt en cours" ou liste vide

  Else [Liste de prêts non vide]
    Système de Gestion Prêts --> UI: Envoyer liste des prêts (Résumé: Ref, Montant Initial, Statut)
    UI --> Mutualiste: Afficher liste des prêts en cours/récents

    Mutualiste -> UI: Sélectionner un prêt [ID Prêt]
    UI -> Système de Gestion Prêts: Demander détails et encours prêt [ID Prêt]

    Système de Gestion Prêts -> DB: Récupérer données prêt, paiements, échéancier [ID Prêt]

    Alt [Prêt sélectionné trouvé]
      DB --> Système de Gestion Prêts: Retourner données détaillées
      Système de Gestion Prêts -> Système de Gestion Prêts: Calculer encours restant dû
      Système de Gestion Prêts --> UI: Envoyer détails complets et encours calculé
      UI --> Mutualiste: Afficher vue détaillée du prêt (Encours, Montants, Statut, Prochaine échéance, etc.)

    Alt [Prêt sélectionné introuvable (Alt A2)]
      Système de Gestion Prêts --> UI: Indiquer erreur (Prêt introuvable)
      UI --> Mutualiste: Afficher message d'erreur / Retour à liste des prêts

    Alt [Erreur Système lors récupération/calcul (Exc E1)]
      Système de Gestion Prêts -> Système de Gestion Prêts: Enregistrer log d'erreur technique
      Système de Gestion Prêts --> UI: Indiquer Échec Technique
      UI --> Mutualiste: Afficher message d'erreur générique
