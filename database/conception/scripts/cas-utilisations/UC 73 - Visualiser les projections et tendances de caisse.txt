title UC 73 - Visualiser les projections et tendances de caisse

Acteurs: Administrateur
Lifelines:
  Administrateur
  Interface Administration (UI Admin)
  Système Financier (Backend/Système)
  Base de Données (DB)
  Moteur d'Analyse Financière (Backend/Système - Optionnel)

Flux:
  Administrateur -> UI Admin: Se connecter à interface administration
  Administrateur -> UI Admin: Naviguer vers section rapports / projections financières

  UI Admin --> Administrateur: Afficher interface rapport projections/tendances (potentiellement avec formulaire paramètres)

  Administrateur -> UI Admin: Spécifier paramètres analyse (Périodes, Types Flux, Hypothèses Optionnelles)
  Administrateur -> UI Admin: Cliquer "Générer Analyse"

  UI Admin -> Système Financier: Envoyer requête génération analyse [Paramètres Analyse]

  Système Financier -> DB: Récupérer données historiques (et futures connues si applicable) pour l'analyse
  Alt [Données historiques suffisantes (Alt A2 si insuffisant)]
    DB --> Système Financier: Retourner données
    Opt [Moteur d'Analyse dédié]
      Système Financier -> Moteur d'Analyse Financière: Envoyer données pour analyse/projection
      Moteur d'Analyse Financière --> Système Financier: Retourner résultats analyse/projection
    Système Financier -> Système Financier: Générer la visualisation (graphiques/tableaux)

    Système Financier --> UI Admin: Envoyer contenu de l'analyse visualisée
    UI Admin --> Administrateur: Afficher le rapport/la visualisation projections et tendances

  Alt [Paramètres manquants/invalides (Alt A1)]
    UI Admin --> Administrateur: Afficher messages d'erreur sur formulaire paramètres

  Alt [Données historiques insuffisantes (Alt A2)]
    DB --> Système Financier: Retourner données insuffisantes
    Système Financier --> UI Admin: Indiquer données insuffisantes
    UI Admin --> Administrateur: Afficher message d'avertissement / Rapport incomplet

  Alt [Erreur Système lors génération (Exc E1)]
    Système Financier -> Système Financier: Enregistrer log erreur
    Opt [Moteur d'Analyse dédié]
      Moteur d'Analyse Financière --> Système Financier: Signaler erreur analyse
    Système Financier --> UI Admin: Indiquer Échec Technique
    UI Admin --> Administrateur: Afficher message générique
