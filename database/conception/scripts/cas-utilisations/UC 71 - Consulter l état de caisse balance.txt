title UC 71 - Consulter l état de caisse (balance)

Acteurs: Administrateur
Lifelines:
  Administrateur
  Interface Administration (UI Admin)
  Système Financier (Backend/Système)
  Base de Données (DB)

Flux:
  Administrateur -> UI Admin: Se connecter à interface administration
  Administrateur -> UI Admin: Naviguer vers section gestion de caisse

  UI Admin -> Système Financier: Demander solde actuel de la caisse (potentiellement spécifier caisse) [ID Caisse (Optionnel)]

  Alt [Caisse configurée et accessible (Alt A1 si non)]
    Système Financier -> DB: Interroger base pour tous les mouvements (entrées/sorties) de la caisse [ID Caisse]
    Alt [Mouvements trouvés (Alt A2 si aucun)]
      DB --> Système Financier: Retourner liste des mouvements
      Système Financier -> Système Financier: Calculer le solde (Somme Entrées - Somme Sorties)
      Système Financier --> UI Admin: Envoyer le solde calculé et date dernier mouvement (Optionnel)
      UI Admin --> Administrateur: Afficher le solde actuel de la caisse

    Alt [Aucun mouvement pour la caisse (Alt A2)]
      DB --> Système Financier: Indiquer aucun mouvement
      Système Financier --> UI Admin: Envoyer solde 0
      UI Admin --> Administrateur: Afficher solde 0 et message "Aucun mouvement enregistré"

    Alt [Erreur Système lors calcul/récupération (Exc E1)]
      Système Financier -> Système Financier: Enregistrer log erreur
      Système Financier --> UI Admin: Indiquer Échec Technique
      UI Admin --> Administrateur: Afficher message d'erreur générique

  Alt [Caisse non configurée/accessible (Alt A1)]
    Système Financier --> UI Admin: Indiquer caisse non trouvée/accessible
    UI Admin --> Administrateur: Afficher message "Aucune caisse configurée/accessible"
