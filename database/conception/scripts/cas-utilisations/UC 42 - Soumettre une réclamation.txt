title UC 42 - Soumettre une réclamation

Acteurs: Mutualiste
Lifelines:
  Mutualiste
  Interface Utilisateur (UI)
  Système de Gestion Réclamations (Backend/Système)
  Base de Données (DB)
  Système de Gestion Documents (Backend/Système - pour documents joints)
  Service d'Audit (Audit Service)
  Service de Notification (Email/Interne)
  Service de Notification Admin (Interne)

Flux:
  Mutualiste -> UI: Se connecter à son espace personnel (UC 1)
  Mutualiste -> UI: Naviguer vers section "Mes Réclamations" / "Support"
  UI --> Mutualiste: Afficher page avec option "Soumettre nouvelle réclamation"

  Mutualiste -> UI: Cliquer "Soumettre nouvelle réclamation"
  UI --> Mutualiste: Afficher formulaire de soumission réclamation

  Mutualiste -> UI: Sélectionner catégorie/motif, rédiger description, fournir infos compl., joindre documents (Optionnel)
  Mutualiste -> UI: Cliquer "Soumettre"

  UI -> Système de Gestion Réclamations: Envoyer données réclamation et documents joints [ID Mutualiste, Données Réclamation, Fichiers]

  Système de Gestion Réclamations -> Système de Gestion Réclamations: Valider données (Alt A2)

  Alt [Validation réussie]
    Système de Gestion Réclamations -> DB: Créer nouvel enregistrement réclamation [Données]
    DB --> Système de Gestion Réclamations: Confirmation création et attribution ID Réf. Unique
    Système de Gestion Réclamations -> Système de Gestion Réclamations: Attribuer Statut Initial ("Soumise")

    Opt [Documents joints]
      Système de Gestion Réclamations -> Système de Gestion Documents: Traiter et associer documents à la réclamation [ID Réclamation, Fichiers]
      Système de Gestion Documents --> Système de Gestion Réclamations: Statut traitement documents (Alt A3 si échec)

    Système de Gestion Réclamations -> Service d'Audit: Enregistrer action soumission réclamation (Qui, Quand, Sujet)
    Service d'Audit --> Système de Gestion Réclamations: Confirmation audit

    Système de Gestion Réclamations --> UI: Indiquer Succès Soumission (avec ID Réf.)
    UI --> Mutualiste: Afficher message de confirmation succès

    Système de Gestion Réclamations -> Service de Notification: Envoyer notification de réception au mutualiste [ID Mutualiste, ID Réf.]
    Service de Notification --> Système de Gestion Réclamations: Statut envoi notification (Exc E2)

    Système de Gestion Réclamations -> Service de Notification Admin: Signaler nouvelle réclamation pour traitement
    Service de Notification Admin --> Système de Gestion Réclamations: Confirmation signalement

  Alt [Validation KO (Alt A2)]
    Système de Gestion Réclamations --> UI: Indiquer Échec Validation avec erreurs
    UI --> Mutualiste: Afficher messages d'erreur sur formulaire

  Alt [Erreur Système lors enregistrement (Exc E1)]
    Système de Gestion Réclamations -> Système de Gestion Réclamations: Enregistrer log d'erreur technique
    Système de Gestion Réclamations --> UI: Indiquer Échec Technique
    UI --> Mutualiste: Afficher message générique

  Alt [Annulation par le Mutualiste (Alt A1)]
    Mutualiste --> UI: Cliquer "Annuler" / Quitter
    UI --> Mutualiste: Abandonner formulaire
