title UC 61 - Exporter des données

Acteurs: Administrateur
Lifelines:
  Administrateur
  Interface Administration (UI Admin)
  Système d'Export (Backend/Système)
  Base de Données (DB)
  Service d'Audit (Audit Service)

Flux:
  Administrateur -> UI Admin: Se connecter à interface administration
  Administrateur -> UI Admin: Naviguer vers section contenant les données à exporter (Liste, Rapport, Section Export dédiée)
  Administrateur -> UI Admin: Cliquer "Exporter" / "Exporter au format..."

  Opt [Configuration exportation nécessaire]
    UI Admin --> Administrateur: Afficher options d'exportation (Format, Colonnes, Filtres)
    Administrateur -> UI Admin: Configurer options d'exportation
    Administrateur -> UI Admin: Cliquer "Générer et télécharger"

  UI Admin -> Système d'Export: Envoyer requête d'exportation [Type de Données, Filtres/Critères, Options Export (Format, Colonnes)]

  Système d'Export -> DB: Récupérer données brutes (selon type, filtres, colonnes demandées)
  Alt [Données trouvées (Alt A2 si aucune)]
    DB --> Système d'Export: Retourner données
    Système d'Export -> Système d'Export: Générer fichier d'exportation dans le format choisi
    Alt [Génération fichier réussie]
      Système d'Export --> UI Admin: Signaler fichier prêt, initier téléchargement
      UI Admin --> Administrateur: Invite de téléchargement dans le navigateur
      Administrateur -> Administrateur: Télécharger le fichier

      Système d'Export -> Service d'Audit: Enregistrer action exportation (Qui, Quand, Type Données, Filtres, Format)
      Service d'Audit --> Système d'Export: Confirmation audit

    Alt [Erreur Système lors génération fichier (Exc E1 partie 2)]
      Système d'Export -> Système d'Export: Enregistrer log erreur
      Sistema d'Export --> UI Admin: Indiquer Échec Génération Fichier
      UI Admin --> Administrateur: Afficher message d'erreur

  Alt [Aucune donnée à exporter (Alt A2)]
    DB --> Système d'Export: Retourner aucune donnée
    Système d'Export --> UI Admin: Indiquer aucune donnée à exporter
    UI Admin --> Administrateur: Afficher message "Aucune donnée à exporter..."

  Alt [Erreur Système lors récupération données (Exc E1 partie 1)]
    DB --> Système d'Export: Indiquer erreur récupération
    Système d'Export -> Système d'Export: Enregistrer log erreur
    Système d'Export --> UI Admin: Indiquer Échec Technique
    UI Admin --> Administrateur: Afficher message générique

  Alt [Format d'exportation non supporté (Alt A3)]
    UI Admin --> Administrateur: Afficher message d'erreur ("Format non supporté")

  Alt [Annulation par l'Administrateur (Alt A1)]
    Administrateur --> UI Admin: Cliquer "Annuler" / Interrompre téléchargement
    UI Admin --> Administrateur: Abandonner opération