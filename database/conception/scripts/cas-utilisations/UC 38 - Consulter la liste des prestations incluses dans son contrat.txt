title UC 38 - Consulter la liste des prestations incluses dans son contrat

Acteurs: Mutualiste
Lifelines:
  Mutualiste
  Interface Utilisateur (UI)
  Système de Gestion Contrats Adhérents (Backend/Système)
  Base de Données (DB)
  Système de Configuration (Backend/Système - pour prestations)

Flux:
  Mutualiste -> UI: Se connecter à son espace personnel (UC 1)
  Mutualiste -> UI: Naviguer vers section "Mon Contrat" / "Mes Prestations"

  UI -> Système de Gestion Contrats Adhérents: Demander contrat et prestations associées [ID Mutualiste]

  Système de Gestion Contrats Adhérents -> DB: Récupérer contrat actif associé au mutualiste [ID Mutualiste]

  Alt [Contrat actif trouvé (Alt A1 si aucun)]
    DB --> Système de Gestion Contrats Adhérents: Retourner ID Modèle Contrat
    Système de Gestion Contrats Adhérents -> Système de Configuration: Demander liste des prestations pour Modèle Contrat [ID Modèle Contrat]

    Alt [Prestations trouvées pour ce contrat (Alt A2 si aucune)]
      Système de Configuration -> DB: Récupérer détails des prestations associées (UC 36 config) [ID Modèle Contrat]
      DB --> Système de Configuration: Retourner détails prestations
      Système de Configuration --> Système de Gestion Contrats Adhérents: Envoyer liste et détails prestations
      Système de Gestion Contrats Adhérents --> UI: Envoyer liste des prestations (Nom, Description, Conditions clés)
      UI --> Mutualiste: Afficher la liste des prestations incluses dans le contrat

    Alt [Aucune prestation définie pour ce contrat (Alt A2)]
      DB --> Système de Configuration: Indiquer aucune prestation
      Système de Configuration --> Système de Gestion Contrats Adhérents: Indiquer aucune prestation
      Système de Gestion Contrats Adhérents --> UI: Indiquer liste prestations vide
      UI --> Mutualiste: Afficher message "Aucune prestation définie pour votre contrat" ou liste vide

    Alt [Erreur Système lors récupération prestations (Exc E1 partie 2)]
      Système de Configuration -> Système de Configuration: Enregistrer log erreur
      Système de Configuration --> Système de Gestion Contrats Adhérents: Indiquer échec
      Système de Gestion Contrats Adhérents --> UI: Indiquer échec récupération
      UI --> Mutualiste: Afficher message d'erreur

  Alt [Aucun contrat actif associé (Alt A1)]
    DB --> Système de Gestion Contrats Adhérents: Indiquer aucun contrat actif
    Système de Gestion Contrats Adhérents --> UI: Indiquer aucun contrat actif
    UI --> Mutualiste: Afficher message "Aucun contrat actif associé..."

  Alt [Erreur Système lors récupération contrat (Exc E1 partie 1)]
    Système de Gestion Contrats Adhérents -> Système de Gestion Contrats Adhérents: Enregistrer log erreur
    Système de Gestion Contrats Adhérents --> UI: Indiquer échec récupération
    UI --> Mutualiste: Afficher message d'erreur
