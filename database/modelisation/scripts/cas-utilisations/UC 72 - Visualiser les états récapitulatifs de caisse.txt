title UC 72 - Visualiser les états récapitulatifs de caisse

Acteurs: Administrateur
Lifelines:
  Administrateur
  Interface Administration (UI Admin)
  Système Financier (Backend/Système)
  Base de Données (DB)

Flux:
  Administrateur -> UI Admin: Se connecter à interface administration
  Administrateur -> UI Admin: Naviguer vers section rapports de caisse

  UI Admin --> Administrateur: Afficher interface rapport récapitulatif (potentiellement avec formulaire paramètres)

  Administrateur -> UI Admin: Sélectionner caisse (Optionnel), Spécifier période pour le rapport
  Administrateur -> UI Admin: Cliquer "Générer Rapport"

  UI Admin -> Système Financier: Envoyer requête génération rapport récapitulatif [ID Caisse (Optionnel), Période]

  Système Financier -> DB: Récupérer mouvements de caisse pour la caisse et la période [ID Caisse, Période]
  Alt [Mouvements ou données de solde trouvées pour la période (Alt A2 si aucune)]
    DB --> Système Financier: Retourner mouvements et/ou données pour calcul solde ouverture/clôture
    Système Financier -> Système Financier: Calculer solde ouverture, total entrées, total sorties, solde clôture pour la période
    Système Financier -> Système Financier: Générer la visualisation du rapport récapitulatif

    Système Financier --> UI Admin: Envoyer contenu du rapport
    UI Admin --> Administrateur: Afficher le rapport récapitulatif de caisse

  Alt [Paramètres manquants/invalides (Alt A1)]
    UI Admin --> Administrateur: Afficher messages d'erreur sur formulaire paramètres

  Alt [Aucun mouvement/donnée pour la période/caisse (Alt A2)]
    DB --> Système Financier: Indiquer aucune donnée
    Système Financier --> UI Admin: Indiquer aucune donnée
    UI Admin --> Administrateur: Afficher rapport avec totaux 0 et message "Aucun mouvement pour cette période/caisse"

  Alt [Erreur Système lors calcul/génération (Exc E1)]
    Sistema Financier -> Sistema Financier: Enregistrer log erreur
    Sistema Financier --> UI Admin: Indiquer Échec Technique
    UI Admin --> Administrateur: Afficher message générique
