title UC 24 - Visualiser l encours d un rachat de prêt

Acteurs: Mutualiste
Lifelines:
  Mutualiste
  Interface Utilisateur (UI)
  Système de Gestion Rachats (Backend/Système)
  Base de Données (DB)

Flux:
  Mutualiste -> UI: Se connecter à son espace personnel (UC 1)
  Mutualiste -> UI: Naviguer vers section "Mes Rachats de Prêts" (UC 23 implicite)

  UI -> Système de Gestion Rachats: Demander liste rachats de prêts du mutualiste [ID Mutualiste]
  Système de Gestion Rachats -> DB: Interroger base pour rachats de prêts en cours/récents [ID Mutualiste]
  DB --> Système de Gestion Rachats: Retourner liste des rachats de prêts (ou liste vide)
  Système de Gestion Rachats --> UI: Envoyer liste des rachats de prêts (Résumé)
  UI --> Mutualiste: Afficher liste des rachats de prêts (UC 23 implicite)

  Opt [Aucun rachat de prêt en cours (Alt A1)]
    UI --> Mutualiste: Message "Aucun rachat en cours" (Fin du flux ici)

  Else [Liste non vide]
    Mutualiste -> UI: Sélectionner un rachat de prêt [ID Rachat]
    UI -> Système de Gestion Rachats: Demander détails et encours rachat [ID Rachat]

    Système de Gestion Rachats -> DB: Récupérer données rachat, paiements rachat, échéancier rachat [ID Rachat]

    Alt [Rachat sélectionné trouvé]
      DB --> Système de Gestion Rachats: Retourner données détaillées du rachat
      Système de Gestion Rachats -> Système de Gestion Rachats: Calculer encours restant dû du rachat
      Système de Gestion Rachats --> UI: Envoyer détails complets et encours calculé du rachat
      UI --> Mutualiste: Afficher vue détaillée du rachat de prêt (Encours, Montants, Statut, Prochaine échéance, etc.)

    Alt [Rachat sélectionné introuvable (Alt A2)]
      Système de Gestion Rachats --> UI: Indiquer erreur (Rachat introuvable)
      UI --> Mutualiste: Afficher message d'erreur / Retour à liste

    Alt [Erreur Système lors récupération/calcul (Exc E1)]
      Système de Gestion Rachats -> Système de Gestion Rachats: Enregistrer log d'erreur technique
      Système de Gestion Rachats --> UI: Indiquer Échec Technique
      UI --> Mutualiste: Afficher message d'erreur générique
