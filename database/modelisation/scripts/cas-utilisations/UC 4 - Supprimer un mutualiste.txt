title UC 4 - Supprimer un mutualiste

Acteurs: Administrateur
Lifelines:
  Administrateur
  Interface Administration (UI Admin)
  Système de Gestion Adhérents (Backend/Système)
  Base de Données (DB)
  Service d'Audit (Audit Service)

Flux:
  Administrateur -> UI Admin: Accéder section gestion adhérents
  Administrateur -> UI Admin: Rechercher/Sélectionner mutualiste à supprimer
  UI Admin -> Système de Gestion Adhérents: Demander informations mutualiste [ID Mutualiste]
  Système de Gestion Adhérents -> DB: Récupérer informations mutualiste [ID Mutualiste]

  Alt [Mutualiste trouvé]
    DB --> Système de Gestion Adhérents: Retourner informations mutualiste
    Système de Gestion Adhérents --> UI Admin: Envoyer informations mutualiste
    UI Admin --> Administrateur: Afficher informations mutualiste et bouton "Supprimer"

    Administrateur -> UI Admin: Cliquer "Supprimer"
    UI Admin --> Administrateur: Afficher message de confirmation (avec avertissement)

    Administrateur -> UI Admin: Confirmer suppression

    UI Admin -> Système de Gestion Adhérents: Demander suppression mutualiste [ID Mutualiste]

    Système de Gestion Adhérents -> DB: Vérifier dépendances/opérations actives [ID Mutualiste]
    DB --> Système de Gestion Adhérents: Retourner résultat vérification

    Alt [Aucune dépendance bloquante]
      Système de Gestion Adhérents -> DB: Exécuter opération suppression/archivage [ID Mutualiste]
      DB --> Système de Gestion Adhérents: Confirmation opération
      Système de Gestion Adhérents -> Service d'Audit: Enregistrer action suppression (Qui, Quand, Mutualiste, Type Opération)
      Service d'Audit --> Système de Gestion Adhérents: Confirmation audit
      Système de Gestion Adhérents --> UI Admin: Indiquer Succès Opération
      UI Admin --> Administrateur: Afficher message de succès ("Mutualiste archivé/supprimé avec succès")

    Alt [Dépendances bloquantes détectées (Scénario Alternatif A2)]
      Système de Gestion Adhérents --> UI Admin: Indiquer Échec Suppression (Dépendances)
      UI Admin --> Administrateur: Afficher message d'erreur ("Suppression impossible : [liste des bloquants]")

    Alt [Erreur Système lors suppression (Scénario d'Exception E2)]
      Système de Gestion Adhérents -> Système de Gestion Adhérents: Enregistrer log d'erreur technique
      Système de Gestion Adhérents --> UI Admin: Indiquer Échec Technique
      UI Admin --> Administrateur: Afficher message d'erreur générique

  Alt [Mutualiste introuvable (Scénario d'Exception E1)]
    DB --> Système de Gestion Adhérents: Indiquer mutualiste non trouvé
    Système de Gestion Adhérents --> UI Admin: Indiquer mutualiste introuvable
    UI Admin --> Administrateur: Afficher message "Mutualiste non trouvé"
    UI Admin --> Administrateur: Rediriger vers liste/recherche

  Alt [Annulation par l'Administrateur (Scénario Alternatif A1)]
    Administrateur --> UI Admin: Cliquer "Annuler" sur la confirmation
    UI Admin --> Administrateur: Retourner à la page précédente (pas d'action backend)
