title UC 3 - Mettre à jour un mutualiste

Acteurs: Administrateur
Lifelines:
  Administrateur
  Interface Administration (UI Admin)
  Système de Gestion Adhérents (Backend/Système)
  Base de Données (DB)
  Service d'Audit (Audit Service)
  Service de Notification (Optionnel)

Flux:
  Administrateur -> UI Admin: Accéder section gestion adhérents
  Administrateur -> UI Admin: Rechercher/Sélectionner mutualiste
  UI Admin -> Système de Gestion Adhérents: Demander informations mutualiste [ID Mutualiste]
  Système de Gestion Adhérents -> DB: Récupérer informations mutualiste [ID Mutualiste]

  Alt [Mutualiste trouvé]
    DB --> Système de Gestion Adhérents: Retourner informations mutualiste
    Système de Gestion Adhérents --> UI Admin: Envoyer informations mutualiste
    UI Admin --> Administrateur: Afficher formulaire de modification pré-rempli

    Administrateur -> UI Admin: Modifier informations
    Administrateur -> UI Admin: Cliquer "Enregistrer modifications"
    UI Admin -> Système de Gestion Adhérents: Envoyer données modifiées [ID Mutualiste, Données]

    Système de Gestion Adhérents -> Système de Gestion Adhérents: Valider données modifiées

    Alt [Validation réussie]
      Système de Gestion Adhérents -> DB: Mettre à jour enregistrement mutualiste [ID Mutualiste, Nouvelles Données]
      DB --> Système de Gestion Adhérents: Confirmation mise à jour
      Système de Gestion Adhérents -> Service d'Audit: Enregistrer action audit (Qui, Quoi, Quand, Détails)
      Service d'Audit --> Système de Gestion Adhérents: Confirmation audit

      Opt [Notification nécessaire (ex: changement statut)]
        Système de Gestion Adhérents -> Service de Notification: Envoyer notification au mutualiste

      Système de Gestion Adhérents --> UI Admin: Indiquer Succès Modification
      UI Admin --> Administrateur: Afficher message de succès

    Alt [Validation échoue (Scénario Alternatif A2)]
      Système de Gestion Adhérents --> UI Admin: Indiquer Échec Validation avec erreurs
      UI Admin --> Administrateur: Afficher messages d'erreur sur formulaire
      UI Admin --> Administrateur: Rester sur formulaire avec modifications

    Alt [Erreur Système lors sauvegarde (Scénario d'Exception E2)]
      Système de Gestion Adhérents -> Système de Gestion Adhérents: Enregistrer log d'erreur technique
      Système de Gestion Adhérents --> UI Admin: Indiquer Échec Technique
      UI Admin --> Administrateur: Afficher message d'erreur générique
      UI Admin --> Administrateur: Rester sur formulaire ou rediriger

  Alt [Mutualiste introuvable (Scénario d'Exception E1)]
    DB --> Système de Gestion Adhérents: Indiquer mutualiste non trouvé
    Système de Gestion Adhérents --> UI Admin: Indiquer mutualiste introuvable
    UI Admin --> Administrateur: Afficher message "Mutualiste non trouvé"
    UI Admin --> Administrateur: Rediriger vers liste/recherche

  Alt [Annulation par l'Administrateur (Scénario Alternatif A1)]
    Administrateur -> UI Admin: Cliquer "Annuler"
    UI Admin --> Administrateur: Rediriger vers page précédente (pas de sauvegarde)
