title UC 44 - Visualiser l historique de ses réclamations

Acteurs: Mutualiste
Lifelines:
  Mutualiste
  Interface Utilisateur (UI)
  Système de Gestion Réclamations (Backend/Système)
  Base de Données (DB)

Flux:
  Mutualiste -> UI: Se connecter à son espace personnel (UC 1)
  Mutualiste -> UI: Naviguer vers section "Mes Réclamations" / "Suivi Réclamations"

  UI -> Système de Gestion Réclamations: Demander liste réclamations du mutualiste [ID Mutualiste]

  Système de Gestion Réclamations -> DB: Interroger base pour réclamations soumises par ce mutualiste [ID Mutualiste]

  Alt [Réclamations trouvées]
    DB --> Système de Gestion Réclamations: Retourner liste des réclamations (ou vide si Alt A1)
    Système de Gestion Réclamations --> UI: Envoyer liste réclamations (Résumé: ID, Date, Sujet, Statut)
    UI --> Mutualiste: Afficher liste des réclamations soumises

    Opt [Mutualiste sélectionne une réclamation pour voir détails]
      Mutualiste -> UI: Sélectionner une réclamation [ID Réclamation]
      UI -> Système de Gestion Réclamations: Demander informations détaillées réclamation [ID Réclamation]

      Alt [Réclamation sélectionnée trouvée (Alt A2 si introuvable)]
        Système de Gestion Réclamations -> DB: Récupérer toutes les données réclamation (soumission, historique traitements, statut, messages visibles) [ID Réclamation]
        DB --> Système de Gestion Réclamations: Retourner données détaillées
        Système de Gestion Réclamations --> UI: Envoyer informations détaillées réclamation (formatées pour Mutualiste)
        UI --> Mutualiste: Afficher vue détaillée réclamation (Infos soumission, Statut actuel, Historique simplifié visible, Messages visibles)

      Alt [Réclamation sélectionnée introuvable (Alt A2)]
        DB --> Système de Gestion Réclamations: Indiquer introuvable
        Système de Gestion Réclamations --> UI: Indiquer erreur (réclamation introuvable)
        UI --> Mutualiste: Afficher message d'erreur / Retour à liste

    Alt [Erreur Système lors récupération détails (Exc E1 partie 2)]
      Système de Gestion Réclamations -> Système de Gestion Réclamations: Enregistrer log erreur
      Système de Gestion Réclamations --> UI: Indiquer échec récupération détails
      UI --> Mutualiste: Afficher message d'erreur

  Alt [Aucune réclamation soumise (Alt A1)]
    DB --> Système de Gestion Réclamations: Indiquer liste vide
    Système de Gestion Réclamations --> UI: Indiquer liste vide
    UI --> Mutualiste: Afficher message "Aucune réclamation soumise..." ou liste vide

  Alt [Erreur Système lors récupération liste (Exc E1 partie 1)]
    Système de Gestion Réclamations -> Système de Gestion Réclamations: Enregistrer log erreur
    Système de Gestion Réclamations --> UI: Indiquer échec récupération liste
    UI --> Mutualiste: Afficher message d'erreur
