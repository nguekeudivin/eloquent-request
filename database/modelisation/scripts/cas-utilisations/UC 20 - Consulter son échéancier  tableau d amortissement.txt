title UC 20 - Consulter son échéancier / tableau d amortissement

Acteurs: Mutualiste
Lifelines:
  Mutualiste
  Interface Utilisateur (UI)
  Système de Gestion Prêts (Backend/Système)
  Base de Données (DB)

Flux:
  Mutualiste -> UI: Se connecter à son espace personnel (UC 1)
  Mutualiste -> UI: Naviguer vers section "Mes Prêts" (UC 19 implicite)

  UI -> Système de Gestion Prêts: Demander liste prêts du mutualiste [ID Mutualiste]
  Système de Gestion Prêts -> DB: Interroger base pour prêts avec échéancier [ID Mutualiste]
  DB --> Système de Gestion Prêts: Retourner liste des prêts éligibles (ou vide)
  Système de Gestion Prêts --> UI: Envoyer liste des prêts éligibles
  UI --> Mutualiste: Afficher liste des prêts (UC 19 implicite)

  Opt [Aucun prêt avec échéancier (Alt A1)]
    UI --> Mutualiste: Message "Aucun échéancier disponible" ou option manquante (Fin du flux ici)

  Else [Liste de prêts avec échéancier non vide]
    Mutualiste -> UI: Sélectionner un prêt pour voir l'échéancier [ID Prêt]
    UI -> Système de Gestion Prêts: Demander échéancier du prêt [ID Prêt]

    Système de Gestion Prêts -> DB: Récupérer données de l'échéancier [ID Prêt]

    Alt [Échéancier trouvé]
      DB --> Système de Gestion Prêts: Retourner données de l'échéancier
      Système de Gestion Prêts --> UI: Envoyer données de l'échéancier
      UI --> Mutualiste: Afficher le tableau d'amortissement détaillé du prêt

    Alt [Prêt introuvable ou échéancier manquant (Alt A2)]
      Système de Gestion Prêts --> UI: Indiquer erreur (Prêt introuvable ou échéancier manquant)
      UI --> Mutualiste: Afficher message d'erreur / Retour à liste des prêts

    Alt [Erreur Système lors récupération (Exc E1)]
      Système de Gestion Prêts -> Système de Gestion Prêts: Enregistrer log d'erreur technique
      Système de Gestion Prêts --> UI: Indiquer Échec Technique
      UI --> Mutualiste: Afficher message d'erreur générique